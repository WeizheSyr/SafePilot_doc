<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Examples &mdash; CPSim 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=2709fde1"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="APIs" href="9_api.html" />
    <link rel="prev" title="Custom Components" href="4_advanced.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CPSim
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1_intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_install.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_basic.html">Built-in Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_advanced.html">Custom Components</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#numerical-simulators">Numerical Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fast-attack-recovery-for-stochastic-cyber-physical-systems">Fast Attack Recovery for Stochastic Cyber-Physical Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="#high-fidelity-simulators">High-fidelity Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="#robotic-vehicle-testbed">Robotic Vehicle Testbed</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="9_api.html">APIs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CPSim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/5_example.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h1>
<section id="numerical-simulators">
<h2>Numerical Simulators<a class="headerlink" href="#numerical-simulators" title="Link to this heading"></a></h2>
<p>In this file, we choose a benchmark plant, CSTR shown in the following figure, controlled by a PID controller.
Also, we define the bias sensor attack that subtracts 25K from the temperature sensor feedback starting from the ninth second.
The detector identifies the attack at the 10th second, and triggers the recovery controllers.
Baseline recovery controllers include (i) no recovery method (none), (ii) software-sensor-based recovery (ssr <a href="#id18"><span class="problematic" id="id1">[1]_</span></a>), (iii) linear-quadratic-regulator-based recovery (lqr <a href="#id19"><span class="problematic" id="id2">[2]_</span></a>), and (vi) data-predictive recovery (mpc <a href="#id20"><span class="problematic" id="id3">[3]_</span></a>).</p>
<p>First, we aim to evaluate the recovery performance of different baseline recovery controllers. We only require modifying the configuration file rather than writing simulation code.
In this file, we use three benchmark plants, CSTR, quadrotor and Vessel, controlled by a PID controller.
Also, we define the bias sensor attack.
The detector identifies the attack after the attack happends and triggers the recovery controllers.
Baseline recovery controllers include (i) no recovery method (none), (ii) software-sensor-based recovery (ssr <a href="#id21"><span class="problematic" id="id4">[1]_</span></a>), (iii) linear-quadratic-regulator-based recovery (lqr <a href="#id22"><span class="problematic" id="id5">[2]_</span></a>), and (vi) data-predictive recovery (mpc <a href="#id23"><span class="problematic" id="id6">[3]_</span></a>).</p>
<p>The following figure plots the results from the simulator. From the curve, we can intuitively analyze the recovery performance of each baseline recovery controller.</p>
<a class="reference internal image-reference" href="_images/performance.png"><img alt="Attack Recovery Performance for Baselines" class="align-center" src="_images/performance.png" style="width: 650px;" /></a>
<p>We conduct a sensitivity analysis by varying bias values and noise on the CSTR benchmark. The findings are displayed in the two figures below.</p>
<a class="reference internal image-reference" href="_images/sensitivity_bias_CSTR.png"><img alt="Sensitivity analysis on CSTR benchmark" class="align-center" src="_images/sensitivity_bias_CSTR.png" style="width: 650px;" /></a>
<a class="reference internal image-reference" href="_images/sensitivity_noise_CSTR.png"><img alt="Sensitivity analysis to noise on CSTR benchmark" class="align-center" src="_images/sensitivity_noise_CSTR.png" style="width: 650px;" /></a>
<p>We also provide the sensitivity analysis by the noise with varying upper bound on the quadrotor benchmark.</p>
<a class="reference internal image-reference" href="_images/sensitivity_noise_Quadrotor.png"><img alt="Sensitivity analysis to noise on quadrotor benchmark" class="align-center" src="_images/sensitivity_noise_Quadrotor.png" style="width: 650px;" /></a>
<p>We provide the source code of above figures.</p>
<p>Reference:</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id7" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<p><cite>F. Kong, M. Xu, J. Weimer, O. Sokolsky, and I. Lee, “Cyber-physical system checkpointing and recovery,” in 2018 ACM/IEEE 9th International Conference on Cyber-Physical Systems (ICCPS), IEEE, 2018, pp. 22-31.</cite></p>
</aside>
<aside class="footnote brackets" id="id8" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<p><cite>L. Zhang, P. Lu, F. Kong, X. Chen, O. Sokolsky, and I. Lee, “Real-time attack-recovery for cyber-physical systems using linear-quadratic regulator,” ACM Trans. Embed. Comput. Syst., vol. 20, no. 5s, Sep. 2021, issn: 1539-9087. doi: 10.1145/3477010.[Online]. Available: https://doi.org/10.1145/3477010.</cite></p>
</aside>
<aside class="footnote brackets" id="id9" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<p><cite>L. Zhang, K. Sridhar, M. Liu, et al., “Real-time data-predictive attack-recovery for complex cyber-physical systems,” in 2023 IEEE 29th Real-Time and Embedded Technology and Applications Symposium (RTAS), 2023.</cite></p>
</aside>
</aside>
</section>
<section id="fast-attack-recovery-for-stochastic-cyber-physical-systems">
<h2>Fast Attack Recovery for Stochastic Cyber-Physical Systems<a class="headerlink" href="#fast-attack-recovery-for-stochastic-cyber-physical-systems" title="Link to this heading"></a></h2>
<p>We present the simulations for the Fast Attack Recovery for Stochastic Cyber-Physical Systems paper <a class="footnote-reference brackets" href="#id15" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>.
We propose the solution to the Optimal probabilistic recovery (OPR).
We use the linear model of a motor as an example.
For the experiments in the paper, we simulate a bias attack against the motor angular speed measurement by adding a bias of -1m/s.
The adversary deploys the attack at time 3s after beginning the simulation, and the detector identifies the attack one second later.
This alarm triggers the recovery strategies.</p>
<p>We compare the performance of our solution, called the open loop OPR (OPR-OL), with the LQR-based recovery <a href="#id24"><span class="problematic" id="id11">[2]_</span></a>, and virtual sensors.
We then obtain the next Figure:</p>
<a class="reference internal image-reference" href="_images/timeseries_motor_speed_3_strats.jpg"><img alt="Attack Recovery Performance for Baselines for the motor system" class="align-center" src="_images/timeseries_motor_speed_3_strats.jpg" style="width: 650px;" /></a>
<p>We also include the simulations to improve our solution by incorporating the non-compromised sensors into the recovery.
We call this strategy the partially closed loop OPR (OPR-PCL).
We compare the OPR-OL and OPR-PCL:</p>
<a class="reference internal image-reference" href="_images/timeseries_motor_speed_opr.jpg"><img alt="Attack Recovery Performance for Baselines for the motor system" class="align-center" src="_images/timeseries_motor_speed_opr.jpg" style="width: 650px;" /></a>
<p>We provide the code to obtain previous figures.</p>
<p>An user can change the attack characteristics (e.g., detection delay).</p>
<p>Reference:</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id12" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<p><cite>F. Kong, M. Xu, J. Weimer, O. Sokolsky, and I. Lee, “Cyber-physical system checkpointing and recovery,” in 2018 ACM/IEEE 9th International Conference on Cyber-Physical Systems (ICCPS), IEEE, 2018, pp. 22-31.</cite></p>
</aside>
<aside class="footnote brackets" id="id13" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<p><cite>L. Zhang, P. Lu, F. Kong, X. Chen, O. Sokolsky, and I. Lee, “Real-time attack-recovery for cyber-physical systems using linear-quadratic regulator,” ACM Trans. Embed. Comput. Syst., vol. 20, no. 5s, Sep. 2021, issn: 1539-9087. doi: 10.1145/3477010.[Online]. Available: https://doi.org/10.1145/3477010.</cite></p>
</aside>
<aside class="footnote brackets" id="id14" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<p><cite>L. Zhang, K. Sridhar, M. Liu, et al., “Real-time data-predictive attack-recovery for complex cyber-physical systems,” in 2023 IEEE 29th Real-Time and Embedded Technology and Applications Symposium (RTAS), 2023.</cite></p>
</aside>
<aside class="footnote brackets" id="id15" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">4</a><span class="fn-bracket">]</span></span>
<p><cite>L. Zhang, L. Burbano, X. Chen, et al., “Fast Attack Recovery for Stochastic Cyber-Physical Systems,” to appear in 2023 IEEE 30th Real-Time and Embedded Technology and Applications Symposium (RTAS), 2024.</cite></p>
</aside>
</aside>
</section>
<section id="high-fidelity-simulators">
<h2>High-fidelity Simulators<a class="headerlink" href="#high-fidelity-simulators" title="Link to this heading"></a></h2>
<p>Since CPSim is a python package, it can be used in conjunction with any simulator that can be called from python.
Especially, many high-fidelity simulators are controlled through python node of ROS, such as Gazebo, SVL, CARLA, and AirSim.</p>
<p>This example demonstrates how to use the toolbox to recover an autonomous vehicle in the SVL simulator.
The vehicle suffers from an IMU sensor attack, deviates from its own lane, and even enters the oncoming lane, as shown in Figure (a).
To apply the lqr recovery controller <a href="#id25"><span class="problematic" id="id16">[2]_</span></a> after detecting the attack, we need to integrate the toolbox with the SVL simulator.
Since there is a ROS bridge communicating with the simulator, we load the toolbox in a ROS node, which is responsible for recovering the vehicle from the attack within a safety deadline.
Figure (b) shows that vehicle returns to its lane during the recovery process.
Figure (c) shows that the recovery controller steers the vehicle to a safe region, the road shoulder, to avoid a collision after recovery.</p>
<a class="reference internal image-reference" href="_images/svl_result.png"><img alt="SVL simulation results" class="align-center" src="_images/svl_result.png" style="width: 650px;" /></a>
<p>Finally, we show the demonstration video here.</p>
<p align="center"><iframe width="700" height="350" src="https://www.youtube.com/embed/OBKl84xG1r4?rel=0" title="Demonstration on SVL Simulator" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></p></section>
<section id="robotic-vehicle-testbed">
<h2>Robotic Vehicle Testbed<a class="headerlink" href="#robotic-vehicle-testbed" title="Link to this heading"></a></h2>
<p>Autonomous vehicles are a type of CPS that rely on sensor information to perform tasks such as path tracking and lane keeping. We built scaled autonomous vehicles, measuring 24 cm in length and 19 cm in width, as testbeds to evaluate the proposed attack detection and recovery methods.</p>
<a class="reference internal image-reference" href="_images/a2_testbed.png"><img alt="Robotic Vehicle Testbed" class="align-center" src="_images/a2_testbed.png" style="width: 400px;" /></a>
<p>Autonomous vehicles sense states and environments, make decisions, and control mobility. Our robotic vehicle testbeds, whose hardware architecture is shown in the following figure, simulate these functions through the following stages:</p>
<ol class="lowerroman simple">
<li><p>Perception: Our testbed is equipped with an Inertial Measurement Unit (IMU), Ultra-wideband (UWB), and encoder sensors that measure attitude, position, and velocity, respectively. We can also use cameras and LiDAR to collect additional environmental data. However, these sensors are vulnerable to sensor attacks.</p></li>
<li><p>Decision Making: A Raspberry Pi with Robot Operating System (ROS2) serves as the main controller. It collects sensor data, estimates vehicle states, and generates control signals. The system uses different controllers for longitudinal and lateral control. For cruise control, a PID controller stabilizes the testbed’s velocity based on encoder feedback. For lane keeping, a Stanley Controller uses the front axle as its reference point, considering both heading error and cross-track error. We can also deploy the proposed attack detection and recovery algorithms on this system.</p></li>
<li><p>Control: An STM32 microcontroller with FreeRTOS system receives control signals from the Raspberry Pi through a Universal Asynchronous Receiver/Transmitter (UART) protocol. Running a real-time operating system, it performs time-sensitive tasks such as generating Pulse Width Modulation (PWM) signals to drive actuators.</p></li>
<li><p>Actuator: The actuator stage includes components such as motors and servos that execute vehicle movements according to control signals.</p></li>
</ol>
<a class="reference internal image-reference" href="_images/hardware_arch.png"><img alt="Hardware Architecture of Robotic Vehicle Testbed" class="align-center" src="_images/hardware_arch.png" style="width: 400px;" /></a>
<p>To demonstrate the toolbox usage, we show a real-time attack recovery on SVL high-fidelity simulator.
We implement the LQR-based attack recovery method <a href="#id26"><span class="problematic" id="id17">[2]_</span></a> on the robotic vehicle testbed, and the design is illustrated in this figure:</p>
<a class="reference internal image-reference" href="_images/testbed_recovery_arch.png"><img alt="Real-time Attack Recovery Implementation on Robotic Vehicle Testbed" class="align-center" src="_images/testbed_recovery_arch.png" style="width: 550px;" /></a>
<p>Autonomous vehicles perform lateral control to track paths provided by path planning modules. High-fidelity models of vehicle dynamics are complex, non-linear, and discontinuous. However, to reduce computational complexity, path tracking controllers typically consider a simplified lateral dynamics model of the vehicle (as shown in the following equation). This model approximates dynamic effects to improve tracking performance.</p>
<div class="math notranslate nohighlight">
 \begin{equation}\label{equ:lanekeeping}
     \frac{d}{d t} \left[\begin{array}{c}
 y \\
 \dot{y} \\
 \psi \\
 \dot{\psi}
 \end{array}\right]=\left[\begin{array}{cccc}
 0 &amp; 1 &amp; 0 &amp; 0 \\
 0 &amp; \frac{-\left(c_f+c_r\right)}{m v_x} &amp; 0 &amp; \frac{\left(l_r c_r-l_f c_f\right)}{m v_x}-v_x \\
 0 &amp; 0 &amp; 0 &amp; 1 \\
 0 &amp; \frac{l_r c_r-l_f c_f}{I_z v_x} &amp; 0 &amp; \frac{-\left(\ell_f^2 c_f+\ell_r^2 c_r\right)}{I_z v_x}
 \end{array}\right]\left[\begin{array}{c}
 y \\
 \dot{y} \\
 \psi \\
 \dot{\psi}
 \end{array}\right]+\left[\begin{array}{c}
 0 \\
 \frac{c_f}{m} \\
 0 \\
 \frac{l_f c_f}{I_z}
 \end{array}\right] \delta
 \end{equation}</div><p>Here, <span class="math notranslate nohighlight">\(c_f\)</span> and <span class="math notranslate nohighlight">\(c_r\)</span> represent cornering stiffness for the front and rear tires; <span class="math notranslate nohighlight">\(l_f\)</span> and <span class="math notranslate nohighlight">\(l_r\)</span> are the distances from the front and rear tires to the vehicle’s center of gravity;
<span class="math notranslate nohighlight">\(I_z\)</span> is the vehicle’s moment of inertia; and <span class="math notranslate nohighlight">\(v_x\)</span> is the longitudinal velocity. The system states are lateral distance from the path (<span class="math notranslate nohighlight">\(y\)</span>), lateral error rate (<span class="math notranslate nohighlight">\(\dot{y}\)</span>),
yaw error (<span class="math notranslate nohighlight">\(\psi\)</span>), and yaw error rate (<span class="math notranslate nohighlight">\(\dot{\psi}\)</span>). The control input is the front wheel steering angle ( <span class="math notranslate nohighlight">\(\delta\)</span>).</p>
<p>To achieve path tracking, we implement the Stanley lateral controller in ROS. The control law is expressed as <span class="math notranslate nohighlight">\(\delta(t)=\psi(t)+\tan ^{-1}\left(\frac{k y(t)}{v_x(t)}\right)\)</span>.
The yaw error (<span class="math notranslate nohighlight">\(\psi\)</span>) is obtained from the IMU sensor, and the lateral distance from the path (<span class="math notranslate nohighlight">\(y\)</span>) is obtained from the UWB sensor for indoor use. In the absence of sensor attacks, the controller can perform path tracking tasks with good performance.
The attacker launches an attack on the IMU sensor, reducing the value of <span class="math notranslate nohighlight">\(\psi\)</span> by 0.60 radians from the start of the attack, with a detection delay of 60 control steps. Figure (a) shows the attack result as detected by the detector.
Subsequently, our proposed method begins controlling the vehicle back to the safe zone, as shown in Figure (c).</p>
<a class="reference internal image-reference" href="_images/testbed_result.jpg"><img alt="Recovery demonstration from our testbed" class="align-center" src="_images/testbed_result.jpg" style="width: 700px;" /></a>
<p>Finally, we show the demonstration video here.</p>
<p align="center"><iframe width="700" height="350" src="https://www.youtube.com/embed/OW5P37aairs?rel=0" title="Demonstration on testbed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></p></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="4_advanced.html" class="btn btn-neutral float-left" title="Custom Components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="9_api.html" class="btn btn-neutral float-right" title="APIs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, CPSim Developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>